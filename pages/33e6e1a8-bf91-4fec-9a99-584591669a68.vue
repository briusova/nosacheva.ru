<template>
    <div ref="jarallaxRef" class="ui basic vertical fitted segment jarallax mceNonEditable min-h-[75vh]" :style="`background-image:url(${url})`">
        <div class="ui active light dimmer" style="position: relative; min-height: 75vh; height: 100%;">
            <div class="ui container">
                <div class="ui huge inverted header right aligned" style="font-family: Arsenal, sans-serif; line-height: 180%;">–ù–û–°–ê–ß–ï–í–ê<br>–ù–∞—Ç–∞–ª–∏—è –ì—Ä–∏–≥–æ—Ä—å–µ–≤–Ω–∞<span class="sub header">1945 ‚Äì 2021</span></div>
            </div>
        </div>
    </div>
    <div class="ui container">
        <p>&nbsp;</p>
        <h1 style="text-align: center;"><span style="color: rgb(186, 55, 42);">–≠—Ç–æ—Ç —Å–∞–π—Ç –æ –∂–∏–∑–Ω–∏ –≤–µ–ª–∏–∫–æ–π –∂–µ–Ω—â–∏–Ω—ã -
                –≤—Ä–∞—á–µ,
                —Ü–µ–ª–∏—Ç–µ–ª–µ –∏ –ø–µ–¥–∞–≥–æ–≥–µ –ù–∞—Ç–∞–ª–∏–∏ –ì—Ä–∏–≥–æ—Ä—å–µ–≤–Ω–µ –ù–æ—Å–∞—á–µ–≤–æ–π –æ—Ç –µ—ë —É—á–µ–Ω–∏–∫–æ–≤.</span></h1>
        <p>üî∏–≤—Ä–∞—á –≤—ã—Å—à–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –ø—Å–∏—Ö–æ–ª–æ–≥, –∞–≤—Ç–æ—Ä –∫–Ω–∏–≥–∏ "–í—Å–ø–æ–º–Ω–∏ –æ —Å–≤–æ—ë–º —è—Å–Ω–æ–≤–∏–¥–µ–Ω–∏–∏", —Å–æ–∑–¥–∞—Ç–µ–ª—å –®–∫–æ–ª—ã —Å–∞–º–æ—Ä–µ–≥—É–ª—è—Ü–∏–∏<br>üî∏–∫–∞–≤–∞–ª–µ—Ä –æ—Ä–¥–µ–Ω–∞ I —Å—Ç–µ–ø–µ–Ω–∏ "–ó–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é —á–µ—Å—Ç—å, –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–æ –∏ –ø–æ—á—ë—Ç–Ω—É—é –¥–µ–ª–æ–≤—É—é —Ä–µ–ø—É—Ç–∞—Ü–∏—é"<br>üî∏–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∞ –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π –∑–æ–ª–æ—Ç–æ–π –º–µ–¥–∞–ª—å—é –û–û–ù "–ó–∞ –∑–∞—Å–ª—É–≥–∏ –ø–µ—Ä–µ–¥ –æ–±—â–µ—Å—Ç–≤–æ–º"</p>

        <p style="text-align: justify; margin-top: 30px;">–ö–∞–∂–¥—ã–π —á–µ–ª–æ–≤–µ–∫ —Å–ø–æ—Å–æ–±–µ–Ω —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ—é –∂–∏–∑–Ω—å
            —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –∞–∫—Ç–∏–≤–∏–∑–∏—Ä–æ–≤–∞–ª–∏—Å—å –∏ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ –≤ –ø–æ–ª–Ω—É—é —Å–∏–ª—É –º–µ—Ö–∞–Ω–∏–∑–º—ã —Å–∞–º–æ—Ä–µ–≥—É–ª—è—Ü–∏–∏. –ò–º–µ–Ω–Ω–æ —ç—Ç–æ–º—É,
            –±–æ–ª–µ–µ 20 –ª–µ—Ç, –ù–∞—Ç–∞–ª–∏—è –ì—Ä–∏–≥–æ—Ä—å–µ–≤–Ω–∞
       –æ–±—É—á–∞–ª–∞ –≤ —Å–≤–æ–µ–π <strong>"–®–∫–æ–ª–µ —Å–∞–º–æ—Ä–µ–≥—É–ª—è—Ü–∏–∏"</strong>.</p>
        <p style="margin-top: 30px; text-align: justify;">–ù–∞—á–∞—Ç—ã–π –ù–∞—Ç–∞–ª–∏–µ–π –ì—Ä–∏–≥–æ—Ä—å–µ–≤–Ω–æ–π –ø—É—Ç—å –Ω–µ –ø—Ä–µ—Ä–≤–∞–ª—Å—è. –ú—ã, –µ—ë
            —É—á–µ–Ω–∏–∫–∏, –ø—Ä–∏–º–µ–Ω—è–µ–º –≤ —Å–≤–æ–µ–π –ø—Ä–∞–∫—Ç–∏–∫–µ –≤—Å—ë —Ç–æ, —á–µ–º—É –æ–Ω–∞ –Ω–∞—Å –Ω–∞—É—á–∏–ª–∞, —á—Ç–æ–±—ã –∂–∏–≤–æ–µ –∑–Ω–∞–Ω–∏–µ –æ–± –£—á–∏—Ç–µ–ª–µ –∏ –µ—ë –ø–æ–¥—Ö–æ–¥–µ
            –ø–µ—Ä–µ–¥–∞–≤–∞–ª–æ—Å—å –¥–∞–ª—å—à–µ. –ù–∞ –∫–∞–Ω–∞–ª–µ <a href="https://t.me/SchoolSelfregulation" rel="noopener" target="_blank"><b>–í–∑–∞–∏–º–æ–î–µ–π—Å—Ç–≤–∏–µ</b></a> –º—ã –¥–µ–ª–∏–º—Å—è –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏, –ø—Ä–æ–≤–æ–¥–∏–º –≤—Å—Ç—Ä–µ—á–∏ –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ—Å—Å–∏–∏ —Å —Ä–∞–∑–±–æ—Ä–æ–º –∫–µ–π—Å–æ–≤ –∏ –æ—Ç–≤–µ—á–∞–µ–º –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã.</p>
        <p style="text-align: justify;">–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ–≤–ª–∞–¥–µ—Ç—å –Ω–∞–≤—ã–∫–∞–º–∏ —Å–∞–º–æ—Ä–µ–≥—É–ª—è—Ü–∏–∏ ‚Äî –Ω–∞—É—á–∏—Ç—å—Å—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å
            —Å–∏–ª—ã, —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å —Ç—Ä–µ–≤–æ–≥–æ–π, —Ä–∞–±–æ—Ç–∞—Ç—å —Å —ç–º–æ—Ü–∏—è–º–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ –±–µ–∑ –º–µ–¥–∏–∫–∞–º–µ–Ω—Ç–æ–≤ ‚Äî
            –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞–º!&nbsp;<span style="color: var(--un-prose-body);">–°–µ–≥–æ–¥–Ω—è, –≤ —ç–ø–æ—Ö—É —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–æ–≥–æ —Å—Ç—Ä–µ—Å—Å–∞
                –∏ —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏, –º–µ—Ç–æ–¥–∏–∫–∏ –ù–∞—Ç–∞–ª–∏–∏ –ì—Ä–∏–≥–æ—Ä—å–µ–≤–Ω—ã –∞–∫—Ç—É–∞–ª—å–Ω—ã –∫–∞–∫ –Ω–∏–∫–æ–≥–¥–∞.</span></p>
        
        <p style="text-align: center;"><a href="https://t.me/SchoolSelfregulation" rel="noopener" target="_blank"><button class="ui large pink basic button" style="font-family: Arsenal, sans-serif; border-radius: 20px;">TELEGRAM-–ö–ê–ù–ê–õ</button></a></p>

        <p>&nbsp;</p>

        <div class="ui three column centered stretched padded grid mceNonEditable stackable doubling">
            <div v-for="(child, i) in page.$children" class="column animate__animated" :class="{ animate__flipInY: animate[i], invisible: !animate[i], }" v-intersection-observer="([{ isIntersecting }]) =&gt; { animate[i] = isIntersecting }">
                <div class="ui fluid raised link card">
                    <div class="ui image" ref="cards">
                        <div class="ui inverted dimmer"><router-link :to="child.to" class="ui circular inverted secondary icon button"><i class="icon !h-3" :class="child.i"></i></router-link></div>
                        <img class="ui image" loading="eager" :src="child.images[0]?.url">
                    </div>
                    <div class="content"><router-link class="ui header hvr-icon-wobble-vertical" style="font-family: Arsenal, sans-serif;" :to="child.to"><i style="vertical-align:top;padding-top:0.3em;" class="hvr-icon icon user md"></i><span class="ui content">{{ child.title }}<span class="sub header">{{
                                    child.description }}</span></span></router-link></div>
                </div>
            </div>
        </div>
        <p>&nbsp;</p>
    </div>
</template>

<script setup>
import { useScriptTag } from "@vueuse/core";
import { inject, onMounted, useTemplateRef, ref, onUnmounted } from "vue";
import { jarallax } from "jarallax";
import { vIntersectionObserver } from "@vueuse/components";

const { id } = defineProps(["id"]),
    page = inject("pages")[id],
    [{ url }] = page.images,
    jarallaxRef = useTemplateRef("jarallaxRef"),
    cardRefs = useTemplateRef("cards"),
    animate = ref([]),
    { load: loadJQuery, unload: unloadJQuery } = useScriptTag("./node_modules/jquery/dist/jquery.min.js", () => { }, { manual: true }),
    { load: loadFomantic, unload: unloadFomantic } = useScriptTag("./node_modules/fomantic-ui-css/semantic.min.js", () => { }, { manual: true });

onMounted(async () => {
    jarallax(jarallaxRef.value, {});
    await loadJQuery();
    await loadFomantic();
    $(cardRefs.value).dimmer({
        transition: "fade up",
        on: "hover",
    });
});

onUnmounted(async () => {
    await unloadFomantic();
    await unloadJQuery();
});
</script>
